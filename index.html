<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>I Examen de Cálculo Integral</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <!-- KaTeX para renderizar ecuaciones -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .katex { font-size: 1.1em; }
        .option-btn { transition: all 0.2s ease; }
        .option-btn:hover { transform: translateY(-2px); }
        #warning-modal {
            transition: opacity 0.3s ease;
        }
    </style>
</head>
<body class="p-6 md:p-12 min-h-screen flex items-center justify-center">
    <!-- Modal de advertencia -->
    <div id="warning-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50">
        <div class="bg-white p-8 rounded-2xl shadow-2xl max-w-2xl mx-4">
            <h2 class="text-2xl font-bold text-red-600 mb-4">⚠️ ADVERTENCIA IMPORTANTE</h2>
            <div class="text-left space-y-4 mb-6">
                <p class="text-lg"><strong>Tiene aproximadamente 12 minutos para cada respuesta, administre bien su tiempo.</strong></p>
                <p class="text-lg">Lea con atención cada pregunta antes de responder.</p>
                <p class="text-lg text-red-600 font-bold">Esta aplicación cuenta con un sistema de identificación de páginas abiertas. Si se abre otra pestaña o ventana durante el examen, se enviará automáticamente un mensaje al profesor y su examen será anulado.</p>
                <p class="text-lg">Trabaje con completa honestidad, el sistema está monitoreando su actividad.</p>
            </div>
            <button id="accept-warning" class="px-8 py-3 bg-green-600 text-white font-semibold rounded-xl shadow-md hover:bg-green-700 transition-colors duration-200">
                Acepto y comprendo las condiciones
            </button>
        </div>
    </div>

    <div id="app" class="bg-white p-8 rounded-2xl shadow-lg w-full max-w-4xl text-center">
        <!-- Contenido de la app se renderizará aquí -->
    </div>

    <script>
        const { jsPDF } = window.jspdf;

        // --- Estructura del examen ---
        const questionsData = [
            {
                id: 1,
                question: '¿Quiénes son considerados los padres del cálculo integral en su forma moderna, desarrollando simultáneamente la teoría de las derivadas e integrales?',
                options: [
                    'Arquímedes y René Descartes',
                    'Isaac Newton y Gottfried Wilhelm Leibniz', // RESPUESTA CORRECTA
                    'Euclides y Carl Friedrich Gauss',
                    'Leonhard Euler y Bernhard Riemann'
                ],
                correctAnswer: 'Isaac Newton y Gottfried Wilhelm Leibniz',
                points: 0.83
            },
            {
                id: 2,
                question: 'La integral indefinida de $\\int f(x) dx$ da como resultado:',
                options: [
                    '$F(x)+C$, tal que $F\'(x)=f(x)$', // RESPUESTA CORRECTA
                    '$F\'(x)+C$, tal que $F(x)=f(x)$',
                    '$f(x)+C$, tal que $f\'(x)=F(x)$',
                    '$F(x)$, tal que $F\'(x)=f(x)$'
                ],
                correctAnswer: '$F(x)+C$, tal que $F\'(x)=f(x)$',
                points: 0.83
            },
            {
                id: 3,
                question: '¿Cuántas primitivas o antiderivadas puede tener una función $f(x)$?',
                options: [
                    'Infinitas, porque hay muchas funciones distintas que tienen la misma derivada.',
                    'Una, dado que solo existe una función $F(x)$ tal que $F\'(x)=f(x)$.',
                    'Infinitas, dado que si $F(x)$ es primitiva, $F(x)+C$ también lo es.', // RESPUESTA CORRECTA
                    'Una, porque la derivada y la integral son únicas por teorema.'
                ],
                correctAnswer: 'Infinitas, dado que si $F(x)$ es primitiva, $F(x)+C$ también lo es.',
                points: 0.83
            },
            {
                id: 4,
                question: '¿Cuál de las siguientes funciones tiene como diferencial $dy = e^x(\\sin x - \\cos x) dx$?',
                options: [
                    '$y = e^x(\\sin x - \\cos x) + C$',
                    '$y = e^x\\sin x + C$',
                    '$y = -e^x\\cos x + C$', // RESPUESTA CORRECTA
                    '$y = e^x\\cos x + C$'
                ],
                correctAnswer: '$y = -e^x\\cos x + C$',
                points: 0.83
            },
            {
                id: 5,
                question: '¿Cuál de las siguientes funciones es una primitiva de $g(x) = kx^n$, donde $k$ y $n$ son constantes?',
                options: [
                    '$G(x) = \\dfrac{k}{n}x^{n-1}+C$',
                    '$G(x) = k\\dfrac{x^{n+1}}{n+1}$', // RESPUESTA CORRECTA
                    '$G(x) = k(n+1)x^{n+1} +C$',
                    '$G(x) = \\dfrac{x^{n+1}}{k(n+1)}$'
                ],
                correctAnswer: '$G(x) = k\\dfrac{x^{n+1}}{n+1}$',
                points: 0.83
            },
            {
                id: 6,
                question: '¿Por qué se dice que al integrar una función $f(x)$ se obtiene una familia de funciones en lugar de una única función?',
                options: [
                    'Porque al derivar se pierde información sobre las constantes aditivas de una función, por eso no se toman en cuenta las constantes al integrar.',
                    'Porque la integral indefinida representa un conjunto de funciones cuya derivada es $f(x)$, y cualquier constante sumada mantiene esa derivada.', // RESPUESTA CORRECTA
                    'Porque la elección de la primitiva depende de las condiciones iniciales, y sin ellas no hay unicidad.',
                    'Porque la integral solo toma en cuenta todas las posibles funciones continuas que producen la misma derivada $f(x)+C$.'
                ],
                correctAnswer: 'Porque la integral indefinida representa un conjunto de funciones cuya derivada es $f(x)$, y cualquier constante sumada mantiene esa derivada.',
                points: 0.83
            },
            {
                id: 7,
                question: '¿Por qué debe añadirse una constante de integración $C$ indeterminada al integrar una función $f(x)$?',
                options: [
                    'Porque la derivada de una constante es cero y toda función a integrar esta sumada a cero; la integral indefinida, como operación inversa, debe recuperar la constante de manera exacta.',
                    'Porque todas las primitivas posibles son funciones que tienen el mismo comportamiento pero que se diferencian por tener desplazamientos en el eje Y de acuerdo con la constante que se sume o se reste.',
                    'Porque al derivar se pierde información sobre las constantes aditivas específicas de la función; la integral indefinida, como operación inversa, debe recuperarlas, aunque no de manera exacta.', // RESPUESTA CORRECTA
                    'Porque la integral busca capturar todas las soluciones posibles, aunque no difieran solo en una constante.'
                ],
                correctAnswer: 'Porque al derivar se pierde información sobre las constantes aditivas específicas de la función; la integral indefinida, como operación inversa, debe recuperarlas, aunque no de manera exacta.',
                points: 0.83
            },
            {
                id: 8,
                question: 'Usando diferenciales para aproximar $\\ln(1.2)$, se obtiene:',
                options: [
                    '$y + \\Delta y \\approx \\ln{x} + \\frac{1}{x}\\Delta x$, con $x = 1$, $\\Delta x = 0.2$; $\\ln(1.2) \\approx 0.2$', // RESPUESTA CORRECTA
                    '$y + \\Delta y \\approx \\ln{x} + x \\Delta x$, con $x = 1$, $\\Delta x = 0.2$; $\\ln(1.2) \\approx 1.2$',
                    '$y + \\Delta y \\approx \\ln(x + \\Delta x)$; $\\ln(1.2) \\approx 0.182$',
                    '$y + \\Delta y \\approx \\ln{x} + \\frac{1}{x^2}\\Delta x$, con $x = 1$, $\\Delta x = 0.2$; $\\ln(1.2) \\approx 0.4$'
                ],
                correctAnswer: '$y + \\Delta y \\approx \\ln{x} + \\frac{1}{x}\\Delta x$, con $x = 1$, $\\Delta x = 0.2$; $\\ln(1.2) \\approx 0.2$',
                points: 0.83
            },
            {
                id: 9,
                question: '¿Qué se necesita para encontrar la solución particular de la ecuación diferencial $\\frac{dy}{dx} = f(x)$?',
                options: [
                    'Una condición inicial $(x_0, y_0)$ de la función $f(x)$ a integrar.',
                    'Un punto $(x_0, y_0)$ de la primitiva $y = F(x)$.', // RESPUESTA CORRECTA
                    'Una condición final $(x_f, y_f)$.',
                    'La constante de integración $C$ elegida arbitrariamente.'
                ],
                correctAnswer: 'Un punto $(x_0, y_0)$ de la primitiva $y = F(x)$.',
                points: 0.83
            },
            {
                id: 10,
                question: 'Dada la ecuación diferencial $\\frac{dy}{dx} = e^x + \\sqrt{x}$ con condición inicial $y(0) = 5$, ¿cuál es la solución particular $y(x)$?',
                options: [
                    '$y(x) = e^x + \\frac{2}{3}x^{3/2} + 5$',
                    '$y(x) = e^x + \\frac{2}{3}x^{3/2} + 4$', // RESPUESTA CORRECTA
                    '$y(x) = e^x + \\frac{1}{2}x^{3/2} + 4$',
                    '$y(x) = e^x + \\sqrt{x} + 5$'
                ],
                correctAnswer: '$y(x) = e^x + \\frac{2}{3}x^{3/2} + 4$',
                points: 0.83
            },
            {
                id: 11,
                question: 'Calcule la integral: $\\displaystyle \\int \\left(\\frac{2}{x} + 2 e^x \\right) dx$',
                options: [
                    '$2(\\ln|x| +  e^x) + C$', // RESPUESTA CORRECTA
                    '$\\frac{1}{2}\\ln|x| +2 e^x + C$',
                    '$\\frac{1}{x} + \\frac{1}{2}e^x + C$',
                    '$\\ln(x) + 2 e^x + C$'
                ],
                correctAnswer: '$2(\\ln|x| +  e^x) + C$',
                points: 0.83
            },
            {
                id: 12,
                question: 'Calcule la integral: $\\displaystyle \\int \\left( 2x^3 - \\frac{1}{x^2} + 4 \\right) dx$',
                options: [
                    '$\\frac{1}{2}x^4 + \\frac{1}{x} + 4x + C$', // RESPUESTA CORRECTA
                    '$2x^4 - \\frac{1}{x} + 4x + C$',
                    '$\\frac{1}{2}x^4 - \\frac{1}{x^2} + 4x + C$',
                    '$2x^4 + \\frac{1}{x^2} + 4x + C$'
                ],
                correctAnswer: '$\\frac{1}{2}x^4 + \\frac{1}{x} + 4x + C$',
                points: 0.83
            }
        ];

        // --- Variables de estado de la aplicación ---
        let currentQuestionIndex = 0;
        let students = [];
        let answers = {};
        let score = 0;
        let isExamFinished = false;
        let timer;
        let timeLeft = 3600; // 1 hora en segundos
        let examStartTime = null;
        let warningAccepted = false;
        let pageFocus = true;

        // --- Detección de cambio de pestaña ---
        document.addEventListener('visibilitychange', function() {
            if (warningAccepted && !document.hidden) {
                // El usuario ha vuelto a la pestaña
                pageFocus = true;
            } else if (warningAccepted && document.hidden) {
                // El usuario ha cambiado de pestaña
                pageFocus = false;
                alertToProfessor();
            }
        });
        
        window.addEventListener('blur', function() {
            if (warningAccepted) {
                pageFocus = false;
                alertToProfessor();
            }
        });
        
        function alertToProfessor() {
            // En una implementación real, aquí se enviaría una notificación al servidor
            console.log("ALERTA: El estudiante ha cambiado de pestaña. Notificación enviada al profesor.");
            // Simulamos un envío de alerta
            alert("⚠️ Se ha detectado que ha abandonado la página del examen. Se ha notificado al profesor. Si continúa, su examen será anulado.");
        }

        // --- Funciones de renderizado ---
        const renderApp = () => {
            const appContainer = document.getElementById('app');
            if (!warningAccepted) {
                // Mostrar modal de advertencia
                document.getElementById('warning-modal').classList.remove('hidden');
                return;
            }
            
            if (students.length === 0) {
                appContainer.innerHTML = renderStudentForm();
            } else if (isExamFinished) {
                appContainer.innerHTML = renderFinalScore();
            } else {
                appContainer.innerHTML = renderExam();
            }
            addEventListeners();
            
            // Renderizar ecuaciones con KaTeX después de actualizar el contenido
            if (students.length > 0 && !isExamFinished) {
                setTimeout(renderEquations, 0);
            }
        };

        // Función para renderizar ecuaciones con KaTeX
        const renderEquations = () => {
            if (typeof renderMathInElement !== 'undefined') {
                renderMathInElement(document.getElementById('app'), {
                    delimiters: [
                        {left: '$$', right: '$$', display: true},
                        {left: '$', right: '$', display: false},
                        {left: '\\(', right: '\\)', display: false},
                        {left: '\\[', right: '\\]', display: true}
                    ],
                    throwOnError: false
                });
            }
        };

        const renderStudentForm = () => {
            let studentInputs = '';
            for (let i = 0; i < 4; i++) {
                studentInputs += `
                    <div class="flex flex-col md:flex-row gap-4">
                        <input type="text" id="student-name-${i}" placeholder="Nombre del estudiante ${i + 1}" class="p-4 border-2 border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full" />
                        <input type="text" id="student-nua-${i}" placeholder="NUA del estudiante ${i + 1}" class="p-4 border-2 border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full" />
                    </div>
                `;
            }

            return `
                <div class="space-y-6">
                    <h1 class="text-3xl md:text-4xl font-extrabold text-gray-800">I Examen de Cálculo Integral</h1>
                    <p class="text-md md:text-lg text-gray-600">Por favor, ingresa los datos de los integrantes del equipo.</p>
                    <div class="space-y-4">
                        ${studentInputs}
                    </div>
                    <button
                        id="start-exam-btn"
                        class="px-8 py-4 bg-blue-600 text-white font-semibold rounded-xl shadow-md hover:bg-blue-700 transition-colors duration-200"
                    >
                        Comenzar Examen
                    </button>
                </div>
            `;
        };
        
        const renderExam = () => {
            const questionData = questionsData[currentQuestionIndex];
            const totalQuestions = questionsData.length;
            const questionNumber = currentQuestionIndex + 1;
            
            const optionsHtml = questionData.options.map((option, index) => `
                <button
                    data-answer="${option}"
                    class="option-btn p-4 border-2 border-gray-300 rounded-xl shadow-sm text-gray-800 text-left transition-colors duration-200 hover:bg-gray-100
                    ${answers[questionData.id] === option ? 'bg-blue-200 border-blue-500' : 'bg-white'}"
                >
                    <span class="font-bold">Opción ${index + 1}:</span> ${option}
                </button>
            `).join('');

            return `
                <div class="space-y-8">
                    <div class="flex justify-between items-center text-xl font-bold text-gray-700 mb-6">
                        <span id="timer" class="text-xl">Tiempo restante: 01:00:00</span>
                        <span>Pregunta ${questionNumber} de ${totalQuestions}</span>
                    </div>
                    <div class="question-content bg-gray-50 p-6 rounded-lg shadow-inner">
                        <p class="text-lg text-gray-700 mb-4">${questionData.question}</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        ${optionsHtml}
                    </div>
                    <div class="flex justify-between items-center mt-8">
                        <button
                            id="prev-btn"
                            ${currentQuestionIndex === 0 ? 'disabled' : ''}
                            class="px-6 py-3 bg-gray-300 text-gray-800 font-semibold rounded-xl shadow-md hover:bg-gray-400 disabled:opacity-50"
                        >
                            Anterior
                        </button>
                        <button
                            id="next-btn"
                            ${!answers[questionData.id] ? 'disabled' : ''}
                            class="px-6 py-3 bg-blue-600 text-white font-semibold rounded-xl shadow-md hover:bg-blue-700 disabled:opacity-50"
                        >
                            ${currentQuestionIndex === totalQuestions - 1 ? 'Terminar Examen' : 'Siguiente'}
                        </button>
                    </div>
                </div>
            `;
        };
        
        const renderFinalScore = () => {
            const finalScore = score.toFixed(2);
            let studentsList = students.map(s => `<li>${s.name} (${s.nua})</li>`).join('');
            
            return `
                <div class="space-y-6">
                    <h1 class="text-3xl md:text-4xl font-extrabold text-gray-800">¡Examen Terminado!</h1>
                    <p class="text-md md:text-lg text-gray-600">Integrantes del equipo:</p>
                    <ul class="list-disc list-inside text-left mx-auto max-w-sm">
                        ${studentsList}
                    </ul>
                    <div class="bg-blue-100 p-6 rounded-xl shadow-inner inline-block">
                        <h2 class="text-2xl font-bold text-blue-800">Calificación Final: ${finalScore} / 10</h2>
                    </div>
                    <p class="text-gray-600">Puedes generar un reporte en PDF con los resultados.</p>
                    <button
                        id="generate-pdf-btn"
                        class="px-8 py-4 bg-purple-600 text-white font-semibold rounded-xl shadow-md hover:bg-purple-700 transition-colors duration-200"
                    >
                        Generar Reporte en PDF
                    </button>
                </div>
            `;
        };

        // --- Lógica del examen ---
        const addEventListeners = () => {
            // Evento para aceptar la advertencia
            document.getElementById('accept-warning').addEventListener('click', function() {
                warningAccepted = true;
                document.getElementById('warning-modal').style.display = 'none';
                renderApp();
            });
            
            if (students.length === 0 && warningAccepted) {
                document.getElementById('start-exam-btn').addEventListener('click', startExam);
                for (let i = 0; i < 4; i++) {
                    const nuaInput = document.getElementById(`student-nua-${i}`);
                    if (nuaInput) {
                        nuaInput.addEventListener('keypress', (e) => {
                            if (e.key === 'Enter') {
                                startExam();
                            }
                        });
                    }
                }
            } else if (isExamFinished) {
                document.getElementById('generate-pdf-btn').addEventListener('click', generatePDF);
            } else {
                const prevBtn = document.getElementById('prev-btn');
                const nextBtn = document.getElementById('next-btn');
                
                if (prevBtn) prevBtn.addEventListener('click', () => {
                    currentQuestionIndex--;
                    renderApp();
                });
                
                if (nextBtn) nextBtn.addEventListener('click', () => {
                    if (currentQuestionIndex < questionsData.length - 1) {
                        currentQuestionIndex++;
                        renderApp();
                    } else {
                        calculateScore();
                        isExamFinished = true;
                        clearInterval(timer);
                        renderApp();
                    }
                });
                
                const optionButtons = document.querySelectorAll('[data-answer]');
                optionButtons.forEach(button => {
                    button.addEventListener('click', (e) => {
                        const answer = e.target.closest('button').dataset.answer;
                        answers[questionsData[currentQuestionIndex].id] = answer;
                        renderApp();
                    });
                });
            }
        };

        const startExam = () => {
            students = [];
            for (let i = 0; i < 4; i++) {
                const nameInput = document.getElementById(`student-name-${i}`);
                const nuaInput = document.getElementById(`student-nua-${i}`);
                if (nameInput && nameInput.value.trim() && nuaInput && nuaInput.value.trim()) {
                    students.push({ name: nameInput.value.trim(), nua: nuaInput.value.trim() });
                }
            }
            if (students.length > 0) {
                examStartTime = new Date();
                startTimer();
                renderApp();
            } else {
                // Use a modal instead of alert
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center';
                modal.innerHTML = `
                    <div class="p-8 bg-white rounded-lg shadow-xl text-center">
                        <h3 class="text-xl font-bold mb-4">Por favor, ingresa los datos de al menos un estudiante para comenzar.</h3>
                        <button onclick="this.parentNode.parentNode.remove()" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">Cerrar</button>
                    </div>
                `;
                document.body.appendChild(modal);
            }
        };
        
        const startTimer = () => {
            timer = setInterval(() => {
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    calculateScore();
                    isExamFinished = true;
                    renderApp();
                    return;
                }
                timeLeft--;
                const hours = Math.floor(timeLeft / 3600);
                const minutes = Math.floor((timeLeft % 3600) / 60);
                const seconds = timeLeft % 60;
                const display = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                const timerElement = document.getElementById('timer');
                if (timerElement) {
                    timerElement.textContent = `Tiempo restante: ${display}`;
                }
            }, 1000);
        };

        const calculateScore = () => {
            score = 0;
            questionsData.forEach(question => {
                if (answers[question.id] === question.correctAnswer) {
                    score += question.points;
                }
            });
        };

        const generatePDF = () => {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Título
            doc.setFontSize(18);
            doc.text("Reporte de Examen", 20, 20);
            doc.setFontSize(16);
            doc.text("Cálculo Integral QFB-2025-II", 20, 28);
            doc.text("Universidad de Guanajuato", 20, 36);
            
            // Información del equipo y fecha
            doc.setFontSize(14);
            let teamNames = students.map(s => `${s.name} (${s.nua})`).join(', ');
            doc.text(`Integrantes del equipo: ${teamNames}`, 20, 50);
            
            const today = new Date();
            const dateString = today.toLocaleDateString();
            const timeString = today.toLocaleTimeString();
            const startTimeString = examStartTime ? examStartTime.toLocaleTimeString() : 'N/A';
            
            doc.text(`Fecha del Examen: ${dateString}`, 20, 60);
            doc.text(`Hora de Inicio: ${startTimeString}`, 20, 68);
            doc.text(`Hora de Entrega: ${timeString}`, 20, 76);
            
            // Calificación
            doc.setFontSize(18);
            doc.text(`Calificación Final: ${score.toFixed(2)} / 10`, 20, 93);
            
            // Detalles de preguntas
            doc.setFontSize(12);
            let y = 108;
            questionsData.forEach((question, index) => {
                const isCorrect = answers[question.id] === question.correctAnswer;
                doc.setTextColor(isCorrect ? 34 : 220); // Verde para correcto, rojo para incorrecto
                doc.text(`Pregunta ${index + 1}:`, 20, y);
                y += 10;
                doc.text(`Respuesta del equipo: ${answers[question.id] || 'No respondida'}`, 30, y);
                y += 10;
                // Add the correct answer for all questions, regardless if the student got it right or wrong.
                doc.text(`Respuesta correcta: ${question.correctAnswer}`, 30, y);
                y += 10;
                y += 5;
            });
            
            doc.save(`Reporte_Examen_${students[0].name.split(' ')[0]}_${new Date().toISOString().slice(0, 10)}.pdf`);
        };

        // Inicializar la aplicación
        window.onload = function() {
            // Mostrar el modal de advertencia primero
            document.getElementById('warning-modal').classList.remove('hidden');
            document.getElementById('warning-modal').classList.add('flex');
            addEventListeners();
        };
    </script>
</body>
</html>
